*latex.txt*    LaTeX plugin for Vim version 7.3 (and above)

Author:  Karl Yngve Lervåg <karl.yngve@gmail.com>
License: MIT license {{{
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
}}}

==============================================================================
CONTENTS                                                      *latex-contents*

    1. Intro ................................ |latex-intro|
    1. Options .............................. |latex-options|
    1. Coupling with latexmk ................ |latex-latexmk|
    1. Folding .............................. |latex-folding|
    1. Omni completion ...................... |latex-completion|
    2. Limitations .......................... |latex-limitations|

==============================================================================
*INTRO*                                                          *latex-intro*

This plugin provides some convenience functionality for editing LaTeX
documents.  It is written in pure vimscript, and the main ideas have been to
be minimalistic and to stay out of the users way.  This means that most of the
functionality is turned off by default, and may be turned on by the user.

The plugin provides the following functionality:

    1. Completion of labels and citations               |latex-completion|
    2. Coupling with latexmk for background compilation |latex-latexmk|

==============================================================================
OPTIONS                                                        *latex-options*

Overview:~

==============================================================================
OMNI COMPLETION                                             *latex-completion*

The plugin provides an 'omnifunc' and two completion functions to gather
candidates for citations and labels |compl-omni|.  The completion may be
customised slightly through *g:latex_complete*, which is a |Dictionary| with
the following entries.

*g:latex_complete.close_braces*
        If set to 1, completion will automatically close the braces.

        Default: 0

*g:latex_complete.patterns*
        A dictionary of patterns that must match for label and citation
        completion.

*g:latex_complete.patterns.ref*
        Default: '\C\\v\?\(eq\|page\|[cC]\)\?ref\*\?\_\s*{[^{}]*'

*g:latex_complete.patterns.bib*
        Default: '\C\\\a*cite\a*\*\?\(\[[^\]]*\]\)*\_\s*{[^{}]*'

*latex#complete#omnifunc*
        The 'omnifunc', enabled by default and accessible via
        'i_<CTRL-X><CTRL-O>'.

*latex#complete#labels*
        Gathers completion candidates for label completion.  Label completion
        is triggered by |g:latex_complete.patterns.ref|, which by
        default matches for instance '\ref{' and '\eqref{'.

        As an example, >
        \ref{sec:<CTRL-X><CTRL-O>
<       offers a list of all matching labels, with their associated value and
        page number.

It matches:
        1. labels: >
                \ref{sec:<CTRL-X><CTRL-O>
<       2. numbers: >
                \eqref{2<CTRL-X><CTRL-O>
<       3. labels and numbers together (separated by whitespace): >
                \eqref{eq 2<CTRL-X><CTRL-O>
<

*latex#complete#bibtex*
        Gathers completion candidates for citation completion.



------------------------------------------------------------------------------
X.4 BibTeX entries                                     *latex-complete-bibtex*

BibTeX completion is triggered by '\cite{', '\citep{' or '\citet{'. For
example, assume you have in your .bib files an entry looking like: >

        @book { knuth1981,
                author = "Donald E. Knuth",
                title = "Seminumerical Algorithms",
                publisher = "Addison-Wesley",
                year = "1981" }

Then, try: >

        \cite{Knuth 1981<CTRL-X><CTRL-O>
        \cite{algo<CTRL-X><CTRL-O>

You can also use regular expressions (or vim patterns) after '\cite{'.

Associated settings:
        |g:LatexBox_cite_pattern|
        |g:LatexBox_bibtex_wild_spaces|
        |g:LatexBox_completion_close_braces|

==============================================================================
X. Limitations                                             *latex-limitations*

This plugin is written for Linux/Unix environments, and so it does NOT support
Windows.  I do not plan to add support.


<LocalLeader>ll                                                     |:Latexmk|
        Compile with latexmk.
<LocalLeader>lL                                                    |:Latexmk!|
        Force compilation with latexmk.
<LocalLeader>lc                                                |:LatexmkClean|
        Clean temporary output from LaTeX.
<LocalLeader>lC                                               |:LatexmkClean!|
        Clean all output from LaTeX.
<LocalLeader>lk                                                 |:LatexmkStop|
        Stop latexmk if it is running.
<LocalLeader>lg                                               |:LatexmkStatus|
        Show the running status of latexmk for the current buffer.
<LocalLeader>lG                                              |:LatexmkStatus!|
        Show the running status of latexmk for all buffers with process group
        ID's.
<LocalLeader>le                                                 |:LatexErrors|
        Load the log file for the current document and jump to the first error.

------------------------------------------------------------------------------

                                                  *latex-mappings-viewing*
Viewing ~

<LocalLeader>lv                                                   |:LatexView|
        View output file.

------------------------------------------------------------------------------

                                                *latex-mappings-insertion*
Insertion ~

*<Plug>LatexCloseCurEnv*
        Close the last matching open environment. Use with imap, e.g.: >
        imap ]] <Plug>LatexCloseCurEnv
<

*<Plug>LatexChangeEnv*
        Change the current environment. Use with nmap, e.g.: >
        nmap <F5> <Plug>LatexChangeEnv
<

*<Plug>LatexWrapSelection*
        Wrap the current selection in a LaTeX command. Use with vmap, e.g.: >
        vmap <F7> <Plug>LatexWrapSelection
<

*<Plug>LatexEnvWrapSelection*
        Wrap the current selection in an environment. Use with vmap, e.g.: >
        vmap <S-F7> <Plug>LatexEnvWrapSelection
<

Suggested mappings to put in ~/.vim/ftplugin/tex.vim: >
        imap <buffer> [[     \begin{
        imap <buffer> ]]     <Plug>LatexCloseCurEnv
        nmap <buffer> <F5>   <Plug>LatexChangeEnv
        vmap <buffer> <F7>   <Plug>LatexWrapSelection
        vmap <buffer> <S-F7> <Plug>LatexEnvWrapSelection
        imap <buffer> ((     \eqref{
<

------------------------------------------------------------------------------

                                                   *latex-mappings-motion*
Motion ~

<LocalLeader>lt                                                    |:LatexTOC|
        Open a table of contents.
        Use Enter to navigate to selected entry.

*<Plug>LatexBox_JumpToMatch*
        Jump to the matching bracket or \begin/\end pairs. Emulates |%|.

*<Plug>LatexBox_BackJumpToMatch*
        Same as |<Plug>LatexBox_JumpToMatch|, but the initial search is
        backward.

Suggested bindings: >
        map  <silent> <buffer> ¶ :call LatexBox_JumpToNextBraces(0)<CR>
        map  <silent> <buffer> § :call LatexBox_JumpToNextBraces(1)<CR>
        imap <silent> <buffer> ¶ <C-R>=LatexBox_JumpToNextBraces(0)<CR>
        imap <silent> <buffer> § <C-R>=LatexBox_JumpToNextBraces(1)<CR>
<

==============================================================================
SETTINGS                                                      *latex-settings*

------------------------------------------------------------------------------

Mappings ~

*g:LatexBox_no_mappings*
        If this variable is defined, the default keyboard mappings will not be
        loaded.

*g:LatexBox_open_pats*
*g:LatexBox_close_pats*
        These variables define the patterns that LatexBox use to detect
        matching pair of braces, parantheses, environments, and similar.

        Default: >
                let g:LatexBox_open_pats  = [
                        \ '\\{','{','\\(','(','\\\[','\[',
                        \ '\\begin\s*{.\{-}}',
                        \ '\\left\s*\%([^\\]\|\\.\|\\\a*\)',
                        \ ]
                let g:LatexBox_close_pats = [
                        \ '\\}','}','\\)',')','\\\]','\]',
                        \ '\\end\s*{.\{-}}',
                        \ '\\right\s*\%([^\\]\|\\.\|\\\a*\)',
                        \ ]
<

                                               *latex-settings-completion*
Completion ~

*g:LatexBox_completion_close_braces*    Default: 1
        If nonzero, omni completion will add closing brackets where relevant.
        For example, if nonzero, >
                \begin{itemize
<       completes to >
                \begin{itemize}

*g:LatexBox_bibtex_wild_spaces*         Default: 1
        If nonzero, spaces act as wildcards ('.*') in completion.

        For example, if nonzero, >
                \cite{Knuth 1981
<       is equivalent to >
                \cite{Knuth.*1981

*g:LatexBox_completion_environments*
*g:LatexBox_completion_commands*
        Static completion lists for environments
        |latex-completion-environments| and commands
        |latex-completion-commands|.
        See |complete-items|.

*g:LatexBox_cite_pattern*
*g:LatexBox_ref_pattern*
        Patterns to match \cite and \ref commands for BibTeX and label
        completion. They must include the trailing '{'.

        Examples: To match only the 'cite' command (case insensitive), use: >
                let LatexBox_cite_pattern = '\c\\cite\*\?\_\s*{'
<       To match all commands that end with 'ref' (case insensitive), use: >
                let LatexBox_ref_pattern = '\c\\\a*ref\*\?\_\s*{'
<       Both of the above examples also match commands with a trailing star.

        Defualt values: >
                let g:LatexBox_cite_pattern
                        \ = '\c\\\a*cite\a*\*\?\(\[[^\]]*\]\)\_\s*{'
                let g:LatexBox_ref_pattern
                        \ = '\C\\v\?\(eq\|page\|[cC]\)\?ref\*\?\_\s*{'
<       The default settings should work for most standard LaTeX packages.

*g:LatexBox_complete_inlineMath*        Default: 0
        Switch for inline math completion.

*g:LatexBox_eq_env_patterns*
        Equation environments besides '$...$', '\(...\)', and '\[...\]' that
        support inline math completion.

        Note that 'eq-env-name*' will also be supported if we add
        'eq-env-name' in the list.

        Default: >
                let g:LatexBox_eq_env_patterns
                        \ = 'equation\|gather\|multiline\|align'
                        \   . '\|flalign\|alignat\|eqnarray'
<

------------------------------------------------------------------------------

Templates (DEPRECATED) ~

*g:LatexBox_templates*

        Dictionary of environment templates |latex-templates|.

        DEPRECATED!
        I think it is better to leave this task to plug-ins oriented to do
        this well, like snipMate:
        http://www.vim.org/scripts/script.php?script_id=2540

------------------------------------------------------------------------------

                                              *latex-settings-compilation*
Compilation ~

*g:vim_program*                                 Default: autodetected
        Vim program to use on command line for callbacks. If autodetect
        fails, defaults to: >
                '/Applications/MacVim.app/Contents/MacOS/Vim -g'
<       on MacVim, or to |v:progname| on other systems.

*g:LatexBox_latexmk_async*                      Default: 0
        Enable asynchronous LaTeX compilation using vimserver. This will
        allow latexmk to run in the background and load any compilation
        errors in a quickfix window after it finishes running.

*g:LatexBox_latexmk_preview_continuously*       Default: 0
        Run latexmk in continuous mode (i.e. with the "-pvc" option).
        Latexmk will track the currently edited file for writes and
        recompile automatically when necessary, without hanging VIM. Note that
        this will disable automatic error loading.

*g:LatexBox_latexmk_options*                    Default: ""
        Additional options to pass to latexmk during compilation, e.g, "-d".

*g:LatexBox_output_type*                        Default: "pdf"
        Extension of the output file. One of "pdf", "dvi" or "ps".

*g:LatexBox_viewer*                             Default: "xdg-open"
        Viewer application for the output file, e.g., "xpdf".

*g:LatexBox_quickfix*                           Default: 1
        Adjust the behavior of the quickfix window when there are compilation
        errors or warnings. See also |g:LatexBox_show_warnings|. Recognized
        options are:

        Value   Effect ~
        0       The quickfix is not opened automatically.
        1       The quickfix window is opened automatically if not
                empty and becomes the active window.
        2       The quickfix window is opened automatically if not
                empty but the cursor stays in the current window.

*g:LatexBox_autojump*                           Default: 0
        Automatically jump to first error after calling latexmk.

*b:main_tex_file*                               Default: ""
        Path to the main LaTeX file associated to the current buffer.
        When editing a LaTeX document consisting of multiple source files, set
        this variable to the path of the main source file on which LaTeX must
        be called.

*g:LatexBox_show_warnings*                      Default: 1
        If set to 1, warnings in compilation will be listed as errors.

*g:LatexBox_ignore_warnings*
        A list of warnings to be ignored.

        Default: >
                let g:LatexBox_ignore_warnings
                        \ = ['Underfull', 'Overfull', 'specifier changed to']
<

*g:LatexBox_build_dir*                          Default: ""
        Set output directory for build files.

*b:build_dir*                                   Default: ""
        Set output directory for build files. This overrides the global
        setting.

------------------------------------------------------------------------------

                                                  *latex-settings-windows*
Vim Windows ~

*g:LatexBox_split_width*                Default: 30
        Width of vertically split vim windows. Used for the table of contents.

*g:LatexBox_split_side*                 Default: "leftabove"
        On which side the vertically split windows appear. Used for the table
        of contents. Set to "rightbelow" to have it on the right side.

*g:LatexBox_split_resize*               Default: 0
        Resize vim/gvim when opening new windows. Used for the table of
        contents. If set to 1, it will add/remove |g:LatexBox_split_width| to
        the number of columns dynamically, in order to keep the latex file open
        with the desired width.

*g:LatexBox_toc_hidehelp*               Default: 0
        If enabled, the help info at the bottom of the TOC window will be
        hidden.

==============================================================================
FOLDING                                                        *latex-folding*

LatexBox can fold texts according to LaTeX structure (part, chapter, section
and subsection). Folding is off by default, and can be turned on by defining
the |g:LatexBox_Folding| variable.

The standard fold settings should suffice for most people. When folding is
turned on and a latex document is opened, the document is parsed once in order
to define the highest fold level based on which parts and sections should be
folded.

*g:LatexBox_Folding*                    Default: undefined
        Set to 1 to activate LaTeX structure folding. Please note that any
        modeline that would set |foldmethod| to something else than
        'fold-expr' will disable the function. The same goes for |foldexpr|.
        Set this variable in your .vimrc

*g:LatexBox_fold_preamble*              Default: 1
        Turn on/off folding of preamble

*g:LatexBox_fold_envs*                  Default: 1
        Turn on/off folding of environments

*g:LatexBox_fold_parts*
        Define parts that should be folded. These are intended as top level
        parts such as \frontmatter and \appendix, and if they are present in
        a latex document they will get fold level 1.

        Default: >
                let g:LatexBox_fold_parts = [
                        \ "appendix",
                        \ "frontmatter",
                        \ "mainmatter",
                        \ "backmatter"
                        \ ]
        <

*g:LatexBox_fold_sections*
        Define which section levels should be folded. The order of the
        elements defines the order in which they are folded.

        Default: >
                let g:LatexBox_fold_sections = [
                        \ "part",
                        \ "chapter",
                        \ "section",
                        \ "subsection",
                        \ "subsubsection"
                        \ ]
        <

*g:LatexBox_fold_toc*                   Default: 0
        Turn on/off folding of TOC (|latex-commands-motion|).

*g:LatexBox_fold_toc_levels*            Default: 1
        Set number of section levels to fold in TOC.

 vim:tw=78:ts=8:ft=help:norl:
